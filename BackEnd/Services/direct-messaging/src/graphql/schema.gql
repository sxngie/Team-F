#-----[Root Fields]-----

type Query {
	getMessage(id: ID!, token: ID!): Message
	getMessages(id: ID!, pageSize: Int!, cursor: Int!, token: ID!): Messages!
	getChat(id: ID!, token: ID!): Chat
	getChats(token: ID!): [Chat!]!
	getUser(token: ID!): User
	getUsers(chat: ID!, token: ID!): [Member!]!
	#-----[Resources]-----
	getFile(id: ID!, token: ID!, type: FileType!): File
	getFiles(
		chat: ID!
		token: ID!
		type: FileType!
		pageSize: Int!
		cursor: Int!
	): Files!
	getLastFiles(
		chat: ID!
		token: ID!
		pageSize: Int!
		type: FileType!
	): [File!]!
	getLinks(chat: ID!, token: ID!, pageSize: Int!, cursor: Int!): Links!
	getLastLinks(chat: ID!, token: ID!, pageSize: Int!): [String!]!
	#TODO: Add other queries.
}

type Mutation {
	joinChat(chat: ID!, token: ID!): Boolean!
	createMessage(chat: ID!, token: ID!, message: MessageInput): Message!
	deleteMessage(id: ID!, token: ID!): Boolean!
	editMessage(id: ID!, token: ID!, message: MessageInput): Message!
	leaveChat(chat: ID!, token: ID!): Boolean!
	addUser(chat: ID!, token: ID!, username: String!): Boolean!
	removeUser(chat: ID!, token: ID!, username: String!): Boolean!
	createChat(name: String!, token: ID!): Chat!
	editChat(chat: ID!, token: ID!, name: String): Chat!
	deleteChat(chat: ID!, token: ID!): Boolean!
	editUserRole(chat: ID!, token: ID!, username: String!, role: Role!): Member!
}

#-----[Inputs]-----
input MessageInput {
	message: String
	reply: ID
	#Files are included in the body of the request.
}

#-----[Interfaces]-----

interface Person {
	id: ID!
	username: String!
	avatar: ID!
}

#-----[Types]-----

type Message {
	id: ID!
	owner: ID!
	chat: ID!
	createdAt: DateTime!
	updatedAt: DateTime!
	message: String
	attachment: File
	reply: ID
}

type File {
	id: ID!
	name: String!
	mimeType: String!
	size: String!
}

type Links {
	hasMore: Boolean!
	cursor: Int!
	links: [String!]!
}

type Files {
	hasMore: Boolean!
	cursor: Int!
	files: [File!]!
}

type Messages {
	hasMore: Boolean!
	messages: [Message!]!
	cursor: Int!
}

type Chat {
	id: ID!
	name: String!
	notification: Boolean!
	users: [Member!]!
	latest: Message
}

type User implements Person {
	id: ID!
	username: String!
	avatar: ID!
}

type Member implements Person {
	id: ID!
	username: String!
	avatar: ID!
	role: Role!
}

#-----[Enum]-----
enum Role {
	admin
	owner
	member
}

enum FileType {
	file
	media
}

scalar DateTime
